<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulacrum Data Analysis - Thejus Mahajan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
</head>

<body class="bg-gray-50 text-gray-700 flex flex-col min-h-screen">

    <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-40">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-gray-800">Thejus Mahajan</a>
            <div class="hidden md:flex space-x-6">
                <a href="index.html" class="text-gray-600 hover:text-sky-600 transition">About</a>
                <a href="experience.html" class="text-gray-600 hover:text-sky-600 transition">Experience</a>
                <a href="skills.html" class="text-gray-600 hover:text-sky-600 transition">Skills</a>
                <a href="projects.html" class="text-sky-600 font-semibold transition">Projects</a>
                <a href="blog.html" class="text-gray-600 hover:text-sky-600 transition">Blog</a>
                <a href="#contact" class="text-gray-600 hover:text-sky-600 transition">Contact</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden flex items-center">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7">
                    </path>
                </svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden">
            <a href="index.html" class="block py-2 px-4 text-sm hover:bg-gray-200">About</a>
            <a href="experience.html" class="block py-2 px-4 text-sm hover:bg-gray-200">Experience</a>
            <a href="skills.html" class="block py-2 px-4 text-sm hover:bg-gray-200">Skills</a>
            <a href="projects.html" class="block py-2 px-4 text-sm hover:bg-gray-200">Projects</a>
            <a href="blog.html" class="block py-2 px-4 text-sm hover:bg-gray-200">Blog</a>
            <a href="#contact" class="block py-2 px-4 text-sm hover:bg-gray-200">Contact</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12 flex-grow">

        <!-- Hero Section -->
        <section class="text-center py-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">Simulacrum Data Analysis</h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                A comprehensive biostatistical analysis of the Simulacrum v2.1.0 synthetic dataset, exploring patient
                demographics, tumour characteristics, and staging distributions.
            </p>
        </section>

        <!-- Data Description & Warnings -->
        <section class="py-8 max-w-4xl mx-auto">
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-6 mb-8 rounded-r-lg shadow-sm">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <svg class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-lg font-medium text-yellow-800">Important: Synthetic Data Warning</h3>
                        <div class="mt-2 text-yellow-700">
                            <p class="mb-2">
                                The data analyzed in this project is <strong>entirely synthetic</strong>. It comes from
                                the Simulacrum, a dataset derived from the National Disease Registration Service (NDRS)
                                in England.
                            </p>
                            <p>
                                While it mimics the structure and statistical properties of real cancer data, <strong>it
                                    does not contain real patient information</strong>. Results from this analysis
                                should <strong>not</strong> be compared to real-world clinical data or used to make
                                clinical decisions.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <h2 class="section-title">About the Data</h2>
            <p class="text-lg leading-relaxed mb-6 text-gray-700">
                The Simulacrum is a tool developed by Health Data Insight (HDI) to facilitate cancer data research
                without compromising patient confidentiality. It allows researchers to write and test code on "safe"
                data that looks like the real thing.
            </p>
            <p class="text-sm text-gray-500 italic mb-12">
                <strong>Citation:</strong> The Simulacrum Version 2.1.0. Health Data Insight. Available at: <a
                    href="https://simulacrum.healthdatainsight.org.uk/"
                    class="text-sky-600 hover:underline">https://simulacrum.healthdatainsight.org.uk/</a>
            </p>
        </section>

        <!-- Part 1: Patient Demographics -->
        <section class="py-12 border-t border-gray-200">
            <h2 class="section-title">Part 1: Patient Demographics</h2>
            <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">
                We begin by analyzing the `sim_av_patient.csv` dataset to understand the demographic composition of the
                cohort.
            </p>

            <!-- Gender Distribution -->
            <div class="grid md:grid-cols-2 gap-12 mb-16 items-center">
                <div>
                    <img src="images/gender_distribution.png" alt="Gender Distribution"
                        class="rounded-lg shadow-md w-full border border-gray-100">
                </div>
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-800">Gender Distribution</h3>
                    <p class="text-lg leading-relaxed mb-4 text-gray-700">
                        The dataset shows a relatively balanced distribution between male and female patients.
                    </p>
                    <p class="text-lg leading-relaxed mb-4 text-gray-700">
                        <strong>Critical Note:</strong> In real-world epidemiology, cancer incidence is rarely a perfect
                        50/50 split due to biological and lifestyle differences.
                        The even balance here likely reflects the <strong>synthetic nature</strong> of the dataset or
                        specific sampling parameters, rather than a biological truth.
                    </p>
                    <p class="text-lg leading-relaxed mb-4 text-gray-700">
                        This is a fundamental check to ensure the synthetic data generation process has not introduced
                        significant
                        gender bias, although specific cancer types (like prostate or breast cancer) are naturally
                        gender-specific.
                    </p>
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto">
                        <h4 class="text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide">R Code:</h4>
                        <pre><code class="language-r"># Load data
df <- read.csv("data/sim_av_patient.csv")

# Map gender codes (0=Not known, 1=Male, 2=Female, 9=Not specified)
df$GENDER_LABEL <- factor(df$GENDER, 
                          levels = c(0, 1, 2, 9), 
                          labels = c("Not known", "Male", "Female", "Not specified"))

# Drop unused levels (Ghost Categories)
df$GENDER_LABEL <- droplevels(df$GENDER_LABEL)

# Create plot with scaling
gender_counts <- table(df$GENDER_LABEL)
gender_counts_scaled <- gender_counts / 1000

# Disable scientific notation
options(scipen=999)

barplot(gender_counts_scaled, 
        main = "Patient Gender Distribution",
        xlab = "Gender",
        ylab = "Count (Thousands)",
        col = c("lightblue", "pink"))</code></pre>
                    </div>
                </div>
            </div>

            <!-- Vital Status -->
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="order-2 md:order-1">
                    <h3 class="text-2xl font-bold mb-4 text-gray-800">Vital Status</h3>
                    <p class="text-lg leading-relaxed mb-4 text-gray-700">
                        The vital status analysis reveals the proportion of patients who are alive versus deceased
                        within the simulation.
                    </p>
                    <p class="text-lg leading-relaxed mb-4 text-gray-700">
                        <strong>Methodological Warning:</strong> The number of "Deceased" patients is a function of the
                        simulation's mortality curves and time horizon.
                        It should <strong>not</strong> be interpreted as a measure of biological "severity" without a
                        proper survival analysis (e.g., Kaplan-Meier curves), which accounts for time-at-risk.
                    </p>
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto">
                        <h4 class="text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide">R Code:</h4>
                        <pre><code class="language-r"># Clean Data: Aggregate D3, D4 etc. into 'D'
# We treat anything starting with 'D' as Deceased, 'A' as Alive.
df$VITAL_CLEAN <- ifelse(substr(df$VITALSTATUS, 1, 1) == "D", "Deceased",
                         ifelse(df$VITALSTATUS == "A", "Alive", NA))

# Remove NAs (noise codes)
df_clean <- df[!is.na(df$VITAL_CLEAN), ]

# Scale to Thousands
vital_counts <- table(df_clean$VITAL_CLEAN)
vital_counts_scaled <- vital_counts / 1000

# Create plot
barplot(vital_counts_scaled, 
        main = "Patient Vital Status",
        xlab = "Status",
        ylab = "Count (Thousands)",
        col = c("lightgreen", "salmon"))</code></pre>
                    </div>
                </div>
                <div class="order-1 md:order-2">
                    <img src="images/vital_status_distribution.png" alt="Vital Status Distribution"
                        class="rounded-lg shadow-md w-full border border-gray-100">
                </div>
            </div>
        </section>

        <!-- Part 2: Tumour Analysis -->
        <section class="py-12 border-t border-gray-200">
            <h2 class="section-title">Part 2: Tumour Analysis</h2>
            <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">
                Next, we examine the `sim_av_tumour.csv` dataset to explore cancer types and staging.
            </p>

            <!-- Cancer Sites -->
            <div class="grid md:grid-cols-2 gap-12 mb-16 items-center">
                <div>
                    <img src="images/top_10_cancer_sites.png" alt="Top 10 Cancer Sites"
                        class="rounded-lg shadow-md w-full border border-gray-100">
                </div>
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-800">Most Common Cancer Sites</h3>
                    <p class="text-lg leading-relaxed mb-4 text-gray-700">
                        We identified the most common cancer diagnoses by grouping the ICD-10 codes.
                    </p>
                    <p class="text-lg leading-relaxed mb-4 text-gray-700">
                        <strong>Epidemiological Correction:</strong> We explicitly <strong>excluded Non-Melanoma Skin
                            Cancer (C44)</strong> from this ranking.
                        While C44 is highly prevalent, it has a very low mortality rate and is standardly excluded from
                        "Top 10" cancer rankings to avoid skewing the data against more significant burdens like Lung or
                        Bowel cancer.
                    </p>
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto">
                        <h4 class="text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide">R Code:</h4>
                        <pre><code class="language-r"># Load data
df <- read.csv("data/sim_av_tumour.csv")

# 1. Define Helper Functions (Crucial for mapping codes to names)
icd10_map <- c(
  "C50" = "Breast", "C61" = "Prostate", "C34" = "Lung",
  "C18" = "Colon", "C19" = "Rectosigmoid", "C20" = "Rectum",
  "C43" = "Melanoma", "C67" = "Bladder", "C25" = "Pancreas",
  "C64" = "Kidney", "C90" = "Mult. Myeloma", "C92" = "Myeloid Leukemia"
)

get_cancer_label <- function(code) {
  if (code %in% names(icd10_map)) {
    return(paste0(code, " (", icd10_map[code], ")"))
  } else {
    return(code)
  }
}

# 2. Prepare Data
# Extract main ICD-10 code (first 3 chars)
df$SITE_MAIN <- substr(df$SITE_ICD10_O2, 1, 3)

# Filter out Non-Melanoma Skin Cancer (C44)
df_filtered <- df[df$SITE_MAIN != "C44", ]

# Count and sort
site_counts <- sort(table(df_filtered$SITE_MAIN), decreasing = TRUE)
top_10_sites <- head(site_counts, 10)

# Create labels
labels <- sapply(names(top_10_sites), get_cancer_label)

# Scale counts (x 10^5) for readability
counts_scaled <- top_10_sites / 100000

# Create horizontal bar plot
barplot(counts_scaled, 
        main = "Top 10 Cancer Sites (Excl. C44 NMSC)",
        xlab = "Count (x 10^5)",
        names.arg = labels, 
        col = "steelblue",
        horiz = TRUE,
        las = 1)</code></pre>
                    </div>
                </div>
            </div>

            <!-- Staging -->
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="order-2 md:order-1">
                    <h3 class="text-2xl font-bold mb-4 text-gray-800">Stage Distribution</h3>
                    <p class="text-lg leading-relaxed mb-4 text-gray-700">
                        Staging is a critical prognostic factor. The plot shows the distribution of cancer stages at
                        diagnosis.
                    </p>
                    <p class="text-lg leading-relaxed mb-4 text-gray-700">
                        <strong>Key Observation:</strong> A large portion of the data is marked as <strong>'?'
                            (Unknown)</strong> or <strong>'U' (Unstaged)</strong>. This is a realistic feature of cancer
                        registry data, often reflecting cases where staging was not possible due to patient health or
                        data collection issues. It highlights the importance of handling missing data in real-world
                        analysis.
                    </p>
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-x-auto">
                        <h4 class="text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide">R Code:</h4>
                        <pre><code class="language-r"># Get stage counts
stage_counts <- table(df$STAGE_BEST)
top_stages <- head(sort(stage_counts, decreasing = TRUE), 15)

# Scale counts
counts_scaled <- top_stages / 100000

# Create plot with legend
barplot(counts_scaled, 
        main = "Distribution of Cancer Stages",
        ylab = "Count (x 10^5)",
        col = "darkorange",
        las = 2,
        ylim = c(0, max(counts_scaled) * 1.2))

legend("topright", 
       legend = c("1-4: Main Stages", "?: Unknown", "U: Unstaged"), 
       bty = "n", title = "Code Key")</code></pre>
                    </div>
                </div>
                <div class="order-1 md:order-2">
                    <img src="images/stage_distribution.png" alt="Stage Distribution"
                        class="rounded-lg shadow-md w-full border border-gray-100">
                </div>
            </div>
        </section>

        <div class="text-center mt-12">
            <a href="projects.html" class="text-sky-600 font-semibold hover:underline text-lg">&larr; Back to
                Projects</a>
        </div>

    </main>

    <footer id="contact" class="bg-gray-800 text-white mt-auto">
        <div class="container mx-auto px-6 py-12 text-center">
            <h2 class="text-3xl font-bold mb-4">Let's Connect</h2>
            <p class="mb-8 max-w-xl mx-auto">I'm currently seeking opportunities in bioinformatics and biostatistics.
            </p>
            <div class="flex justify-center space-x-6">
                <a href="mailto:thejusmahajan@gmail.com"
                    class="bg-sky-600 hover:bg-sky-700 text-white font-bold py-3 px-6 rounded-full transition-colors duration-300">Email
                    Me</a>
                <a href="https://www.linkedin.com/in/dr-thejus-mahajan-ph-d-85a4b087" target="_blank"
                    class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full transition-colors duration-300">LinkedIn</a>
                <a href="https://github.com/thejusmahajan" target="_blank"
                    class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-full transition-colors duration-300">GitHub</a>
            </div>
            <p class="mt-10 text-gray-400 text-sm">&copy; 2025 Thejus Mahajan. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body>

</html>